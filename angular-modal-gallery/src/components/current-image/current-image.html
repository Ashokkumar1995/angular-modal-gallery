<main class="main-image-container" [attr.aria-label]="accessibilityConfig.mainContainerAriaLabel" [title]="accessibilityConfig.mainContainerTitle">
  <a class="nav-left" *ngIf="images?.length > 1"
     [attr.aria-label]="accessibilityConfig.mainPrevImageAriaLabel"
     [tabindex]="isFirstImage ? -1 : 0" role="button"
     (click)="prevImage()">
    <div class="inside {{isFirstImage ? 'empty-arrow-image' : 'left-arrow-image'}}"
         aria-hidden="true"
         [title]="accessibilityConfig.mainPrevImageTitle"></div>
  </a>

  <ng-container *ngIf="getLeftPreviewImage() as leftPreview">
    <img *ngIf="!isFirstImage; else firstImage"
         class="inside current-image-previous"
         [src]="leftPreview.thumb ? leftPreview.thumb : leftPreview.img"
         [hidden]="loading || !slideConfig.sidePreviews || !slideConfig.sidePreviews.show"
         ksSize [sizeConfig]="{width: slideConfig.sidePreviews.width, height: slideConfig.sidePreviews.height,
         unitWidth: slideConfig.sidePreviews.unit, unitHeight: slideConfig.sidePreviews.unit}"
         [attr.aria-label]="leftPreview.ariaLabel"
         [title]="leftPreview.title ? leftPreview.title : getDescriptionToDisplay(leftPreview)"
         alt="{{leftPreview.alt ? leftPreview.alt : getAltDescriptionByImage(leftPreview)}}"
         [tabindex]="0" role="img"
         (click)="prevImage(clickAction)"/>
    <ng-template #firstImage>
      <div class="current-image-previous hidden"
           [style.width]="slideConfig.sidePreviews.width+slideConfig.sidePreviews.unit"
           [style.height]="slideConfig.sidePreviews.height+slideConfig.sidePreviews.unit"></div>
    </ng-template>
  </ng-container>

  <figure id="current-figure" [hidden]="loading">
    <img id="current-image"
         class="inside"
         [src]="currentImage.img"
         [attr.aria-label]="currentImage.ariaLabel"
         [title]="currentImage.title ? currentImage.title : getDescriptionToDisplay()"
         alt="{{currentImage.alt ? currentImage.alt : getAltDescriptionByImage()}}"
         [tabindex]="0" role="img"
         (load)="onImageLoad($event)"
         (click)="nextImage(clickAction)"
         (swipeleft)="swipe($event.type)"
         (swiperight)="swipe($event.type)"/>
    <figcaption class="inside description">{{getDescriptionToDisplay()}}</figcaption>
  </figure>


  <ng-container *ngIf="getRightPreviewImage() as rightPreview">
    <img *ngIf="!isLastImage; else lastImage"
         class="inside current-image-next"
         [src]="rightPreview.thumb ? rightPreview.thumb : rightPreview.img"
         [hidden]="loading || !slideConfig.sidePreviews || !slideConfig.sidePreviews.show"
         ksSize [sizeConfig]="{width: slideConfig.sidePreviews.width, height: slideConfig.sidePreviews.height,
         unitWidth: slideConfig.sidePreviews.unit, unitHeight: slideConfig.sidePreviews.unit}"
         [attr.aria-label]="rightPreview.ariaLabel"
         [title]="rightPreview.title ? rightPreview.title : getDescriptionToDisplay(rightPreview)"
         alt="{{rightPreview.alt ? rightPreview.alt : getAltDescriptionByImage(rightPreview)}}"
         [tabindex]="0" role="img"
         (click)="nextImage(clickAction)"/>
    <ng-template #lastImage>
      <div class="current-image-next hidden"
           [style.width]="slideConfig.sidePreviews.width+slideConfig.sidePreviews.unit"
           [style.height]="slideConfig.sidePreviews.height+slideConfig.sidePreviews.unit">
      </div>
    </ng-template>
  </ng-container>

  <ng-container *ngIf="loading && loadingConfig.enable">
    <ks-loading-spinner [loadingConfig]="loadingConfig"
                        [accessibilityConfig]="accessibilityConfig"></ks-loading-spinner>
  </ng-container>

  <a class="nav-right" *ngIf="images?.length > 1"
     [attr.aria-label]="accessibilityConfig.mainNextImageAriaLabel"
     [tabindex]="isLastImage ? -1 : 0" role="button"
     (click)="nextImage()">
    <div class="inside {{isLastImage ? 'empty-arrow-image' : 'right-arrow-image'}}"
         aria-hidden="true"
         [title]="accessibilityConfig.mainNextImageTitle"></div>
  </a>
</main>
